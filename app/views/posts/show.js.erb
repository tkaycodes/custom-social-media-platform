$(document).ready(function(){
  $("#modal-window").html("<%= escape_javascript(render 'posts/form') %>");

  
  $('#likebutton').on("click", function(){
    console.log("liked");
    $.ajax({
      url: 'likes',
      method: 'post',
      dataType: 'json',
      data: {id: '<%=@post.id%>'},
      success: function(data)
      {
      console.log('sucess');
      $('#likebutton').hide();
      $('#unlikebutton').show();
      $('#unlikebutton').data('likeid', data.id)
           console.log(data);
      },
      error: function(result){
        console.log(result);
        console.log('error');
      }
      // error: function(result){
      //     console.log(result);
      // };

    });
  });

    $('#unlikebutton').on("click", function(){
    console.log($('#unlikebutton').data("likeid"))
    var likeid = $('#unlikebutton').data("likeid");
      $.ajax({
        url: 'likes/'+likeid,
        method: 'delete',
        dataType: 'json',
        success: function(data)
        {
        console.log('sucess');
        $('#unlikebutton').hide();
        $('#likebutton').show();
             console.log(data);
        },
        error: function(result){
          console.log(result);
          console.log('error');
        }
    });

  });
  


});
